name = "sentinel-proxy"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# Routes - configure your domain
# routes = [
#   { pattern = "example.com/*", zone_name = "example.com" }
# ]

# ══════════════════════════════════════════════════════════════════════════════
# KV NAMESPACES (required)
# Run: wrangler kv:namespace create <NAME>
# ══════════════════════════════════════════════════════════════════════════════

# Blocklist storage
[[kv_namespaces]]
binding = "BLOCKLIST_KV"
id = "your-blocklist-kv-id"  # wrangler kv:namespace create BLOCKLIST_KV

# Rate limit counters
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "your-ratelimit-kv-id"  # wrangler kv:namespace create RATE_LIMIT_KV

# Reputation tracking
[[kv_namespaces]]
binding = "REPUTATION_KV"
id = "your-reputation-kv-id"  # wrangler kv:namespace create REPUTATION_KV

# Escalation tracking (repeat offenders)
[[kv_namespaces]]
binding = "ESCALATION_KV"
id = "your-escalation-kv-id"  # wrangler kv:namespace create ESCALATION_KV

# ══════════════════════════════════════════════════════════════════════════════
# OPTIONAL BINDINGS
# ══════════════════════════════════════════════════════════════════════════════

# Analytics Engine (optional)
# [[analytics_engine_datasets]]
# binding = "ANALYTICS"

# ══════════════════════════════════════════════════════════════════════════════
# ENVIRONMENT VARIABLES
# ══════════════════════════════════════════════════════════════════════════════
[vars]
# Origin website URL (REQUIRED)
ORIGIN_URL = "https://your-backend.com"

# Debug mode
DEBUG = "false"

# Origin timeout in seconds
ORIGIN_TIMEOUT = "30"

# Enable response detection (checks for data leaks)
ENABLE_RESPONSE_DETECTION = "false"

# Enable async pipeline (reputation tracking, blocklist updates)
ENABLE_ASYNC_PIPELINE = "false"

# Slack webhook for notifications (optional)
# SLACK_WEBHOOK = "https://hooks.slack.com/services/xxx"
